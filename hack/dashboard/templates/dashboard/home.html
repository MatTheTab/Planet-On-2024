{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <!-- Sekcja nagłówka -->
    <div class="hero text-center">
        <h1>Welcome to Dashboard</h1>
        <p>Analyze and track ecological projects.</p>
    </div>

    <!-- Sekcja z kartami -->
    <div class="row gy-4">
        {% for card in mock_data.cards %}
        <div class="col-md-3">
            <div class="card text-center">
                <div class="card-body">
                    <i class="fas {{ card.icon }} fa-2x mb-3"></i>
                    <h5 class="card-title">{{ card.title }}</h5>
                    <p class="card-text">
                        <strong>{{ card.value }}</strong>
                    </p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Sekcja z wykresami -->
    <div class="row mt-5 gy-4">
        {% for chart in mock_data.charts %}
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">{{ chart.title }}</h5>
                    <canvas id="chart-{{ chart.id }}"></canvas>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Sekcja JavaScript dla wykresów -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        {% for chart in mock_data.charts %}
        new Chart(document.getElementById('chart-{{ chart.id }}'), {
            type: 'line',
            data: {
                labels: ['Styczeń', 'Luty', 'Marzec', 'Kwiecień'],
                datasets: [{
                    label: '{{ chart.title }}',
                    data: {{ chart.value|safe }},
                    borderColor: 'rgba(56, 142, 60, 0.8)',
                    backgroundColor: 'rgba(56, 142, 60, 0.3)',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                },
                scales: {
                    x: {
                        grid: { color: 'rgba(0,0,0,0.1)' },
                        title: { display: true, text: 'Miesiące' }
                    },
                    y: {
                        grid: { color: 'rgba(0,0,0,0.1)' },
                        title: { display: true, text: 'Wartości' }
                    }
                }
            }
        });
        {% endfor %}
    });
</script>
{% endblock %}
